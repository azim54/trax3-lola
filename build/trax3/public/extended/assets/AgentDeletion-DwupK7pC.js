import{_ as x}from"./TasksLayout-BcOeq5lv.js";import{g as m,o as A,c as P,d as n,u as V,w as a,F as j,Z as y,e as I,a as l}from"./app-BqYB4w7h.js";import{_ as S}from"./AgentFilter-Bzph49mo.js";import{_ as $}from"./Select-I1X3nauV.js";import{_ as L}from"./InputLabel-B012P3ON.js";import{_ as N}from"./Checkbox-CesKyGxn.js";import{_ as O}from"./JobsManagement-BhfjSFNe.js";import{_ as w}from"./JobLogs-CCjrTMq8.js";import{u as U}from"./XapiProps-BVq1ckif.js";import"./AuthenticatedLayout-DmkbqqwL.js";import"./TopBar-CSycyVTE.js";import"./ApplicationLogo-CbRF8qXe.js";import"./form-BD1T68Go.js";import"./use-resolve-button-type-zbaL4VAc.js";import"./calculate-active-index-CJPhqQS-.js";import"./use-text-value-5zAQL0RU.js";import"./use-tree-walker-CEHhLUFs.js";import"./AgentField-Cckzi0Yd.js";import"./ChevronUpDownIcon-BxOM5Ujt.js";import"./TextInputWithCompletion-u-xIqChF.js";import"./InputError-_zuJ5dV-.js";import"./disposables-CuHKeC00.js";import"./StoreSelector-eCG8qd9a.js";import"./NeutralBadge-Cx27iNjU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FormModal--OgS4LYv.js";import"./PrimaryButton-JrsBxlP3.js";import"./transition-CSxLRhS2.js";import"./ConfirmModal-DdIInXQ7.js";import"./moment-Cl4UOzQZ.js";import"./TextInput-Bd33mpYb.js";import"./PencilSquareIcon-CqSWVHZD.js";import"./DataPanel-eTawuoZh.js";import"./CrudItems-BFkrHaNx.js";import"./LoadItems-f7CjgfCr.js";import"./FilterItems-DtKLW4qf.js";const B={class:"px-6"},D={class:"mt-5 px-6"},J={class:"mt-5 px-6"},p="/trax/api/gateway/front/jobs/agent-deletion",xe={__name:"AgentDeletion",setup(k){const{agentIdByJson:u}=U(),d={agent:null,person:!1,store:null},i=m([{id:null,name:"All stores"}]),f=[{id:null,name:"All services"},{id:"statements",name:"Statements"},{id:"agents",name:"Agents"},{id:"agent-profiles",name:"Agent Profiles"},{id:"states",name:"States"}],g=t=>new Promise((e,r)=>{axios.get("/trax/api/gateway/front/stores").then(b=>{i.value=b.data.data.filter(s=>s.status==="ready").map(s=>({id:s.slug,name:s.name})),i.value.unshift({id:null,name:"All stores"}),e()})}),_=t=>{let e=t.settings.person?"Person: ":"Agent: ";return t.description=e+u(JSON.parse(t.settings.agent)),t},c=(t,e)=>e=="agent"?JSON.parse(t.settings.agent):t[e]===void 0?null:t[e],v=(t,e)=>e=="agent"&&t.agent?JSON.stringify(t.agent):t[e],o=m(null);return(t,e)=>(A(),P(j,null,[n(V(y),{title:"Agent Deletion"}),n(x,{"side-menu-current":"Agent Deletion"},{default:a(()=>[n(O,{formSize:"xl",endpoint:p,title:"Agent Deletion",jobProps:d,beforeItemLoading:g,afterItemLoading:_,afterPropLoading:c,beforePropPosting:v,onInit:e[4]||(e[4]=r=>o.value=r),services:f},{description:a(()=>[I(" You can run this job in order to remove all the xAPI data related to an agent. ")]),form:a(()=>[l("div",B,[n(L,{value:"Store"}),n($,{id:"store",options:i.value,modelValue:o.value.form.store,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.form.store=r),class:"mt-1"},null,8,["options","modelValue"])]),l("div",D,[n(S,{modelValue:o.value.form.agent,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.form.agent=r),error:o.value.errors.agent,"onUpdate:error":e[2]||(e[2]=r=>o.value.errors.agent=r),onApply:o.value.createOrUpdate,inline:!1},null,8,["modelValue","error","onApply"])]),l("div",J,[n(N,{id:"person",label:"Remove all the agents of this person",modelValue:o.value.form.person,"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.form.person=r)},null,8,["modelValue"])])]),feedback:a(()=>[n(w,{job:o.value.job,endpoint:p},null,8,["job"])]),_:1})]),_:1})],64))}};export{xe as default};
