import{g as c,m as d,s as O}from"./app-BqYB4w7h.js";function v(e,o){const s=c(!1),n=c(!1),a=c(!1),m={...e.filters},y={...e.options};d(()=>{b()});const b=()=>{if(o.localStorage){let l=localStorage.getItem(o.localStorage);if(l){l=JSON.parse(l),a.value=l.settings.showMoreFilters,Object.assign(e.filters,l.filters),Object.assign(e.options,l.options),f(!1);return}}f(!1)},u=()=>{o.resetFilters!==void 0?o.resetFilters():(Object.assign(e.filters,m),Object.assign(e.options,y)),f(),s.value=!1,n.value=!0},f=(l=!0)=>{const r={filters:{},options:{}};Object.keys(e.filters).forEach(t=>{p(e.filters,r.filters,t)}),Object.keys(e.options).forEach(t=>{p(e.options,r.options,t)}),l&&F(),s.value=!0,o.emit&&o.emit("apply",r),o.callback&&o.callback(r)},p=(l,r,t)=>{let i=l[t];i!=null&&(typeof i=="string"&&!i.trim()&&(l[t]=""),typeof i=="string"&&i.trim()&&(r[t]=i.trim()),(typeof i=="boolean"||typeof i=="number")&&(r[t]=i),typeof i=="object"&&(r[t]=JSON.stringify(i)))},F=()=>{o.localStorage&&localStorage.setItem(o.localStorage,JSON.stringify({filters:e.filters,options:e.options,settings:{showMoreFilters:a.value}}))};return O(()=>e.counter,()=>{s.value=!1,n.value=!1}),{resetingFilters:n,resetFilters:u,applyingFilters:s,applyFilters:f,showMoreFilters:a,recordFilters:F}}export{v as u};
