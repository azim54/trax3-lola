import{B as O,g as b,G as H,h as w,m as Z,C as G,A as J,K as R,H as W,o as T,c as A,a as S,Q as X,b as Y,w as _,d as M,F,i as L,u as k,n as N,t as j,j as ee,x as te}from"./app-BqYB4w7h.js";import{a as ae,_ as ne}from"./ApplicationLogo-CbRF8qXe.js";import{I as D,u as B,o as d,A as C,N as K,a as m}from"./form-BD1T68Go.js";import{d as U,a as P,b as re,g as se,h as le,l as oe,u as ue,f as ie,e as y,v as ce,N as V,_ as q,O as de}from"./calculate-active-index-CJPhqQS-.js";import{s as pe}from"./use-resolve-button-type-zbaL4VAc.js";import{p as ve}from"./use-text-value-5zAQL0RU.js";import{i as fe}from"./use-tree-walker-CEHhLUFs.js";var me=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(me||{});let ge=Symbol("DisclosureContext"),be=O({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(a,{slots:p,attrs:v}){let o=b(a.defaultOpen?0:1),g=b(null),f=b(null),e={buttonId:b(`headlessui-disclosure-button-${D()}`),panelId:b(`headlessui-disclosure-panel-${D()}`),disclosureState:o,panel:g,button:f,toggleDisclosure(){o.value=B(o.value,{0:1,1:0})},closeDisclosure(){o.value!==1&&(o.value=1)},close(r){e.closeDisclosure();let l=r?r instanceof HTMLElement?r:r.value instanceof HTMLElement?d(r):d(e.button):d(e.button);l==null||l.focus()}};return H(ge,e),U(w(()=>B(o.value,{0:P.Open,1:P.Closed}))),()=>{let{defaultOpen:r,...l}=a,h={open:o.value===0,close:e.close};return C({theirProps:l,ourProps:{},slot:h,slots:p,attrs:v,name:"Disclosure"})}}});var he=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(he||{}),xe=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(xe||{});function ye(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let Q=Symbol("MenuContext");function E(a){let p=W(Q,null);if(p===null){let v=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,E),v}return p}let Ie=O({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:p,attrs:v}){let o=b(1),g=b(null),f=b(null),e=b([]),r=b(""),l=b(null),h=b(1);function I(t=s=>s){let s=l.value!==null?e.value[l.value]:null,n=de(t(e.value.slice()),x=>d(x.dataRef.domRef)),i=s?n.indexOf(s):null;return i===-1&&(i=null),{items:n,activeItemIndex:i}}let u={menuState:o,buttonRef:g,itemsRef:f,items:e,searchQuery:r,activeItemIndex:l,activationTrigger:h,closeMenu:()=>{o.value=1,l.value=null},openMenu:()=>o.value=0,goToItem(t,s,n){let i=I(),x=ie(t===y.Specific?{focus:y.Specific,id:s}:{focus:t},{resolveItems:()=>i.items,resolveActiveIndex:()=>i.activeItemIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.disabled});r.value="",l.value=x,h.value=n??1,e.value=i.items},search(t){let s=r.value!==""?0:1;r.value+=t.toLowerCase();let n=(l.value!==null?e.value.slice(l.value+s).concat(e.value.slice(0,l.value+s)):e.value).find(x=>x.dataRef.textValue.startsWith(r.value)&&!x.dataRef.disabled),i=n?e.value.indexOf(n):-1;i===-1||i===l.value||(l.value=i,h.value=1)},clearSearch(){r.value=""},registerItem(t,s){let n=I(i=>[...i,{id:t,dataRef:s}]);e.value=n.items,l.value=n.activeItemIndex,h.value=1},unregisterItem(t){let s=I(n=>{let i=n.findIndex(x=>x.id===t);return i!==-1&&n.splice(i,1),n});e.value=s.items,l.value=s.activeItemIndex,h.value=1}};return re([g,f],(t,s)=>{var n;u.closeMenu(),se(s,le.Loose)||(t.preventDefault(),(n=d(g))==null||n.focus())},w(()=>o.value===0)),H(Q,u),U(w(()=>B(o.value,{0:P.Open,1:P.Closed}))),()=>{let t={open:o.value===0,close:u.closeMenu};return C({ourProps:{},theirProps:a,slot:t,slots:p,attrs:v,name:"Menu"})}}}),Se=O({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:p,slots:v,expose:o}){var g;let f=(g=a.id)!=null?g:`headlessui-menu-button-${D()}`,e=E("MenuButton");o({el:e.buttonRef,$el:e.buttonRef});function r(u){switch(u.key){case m.Space:case m.Enter:case m.ArrowDown:u.preventDefault(),u.stopPropagation(),e.openMenu(),R(()=>{var t;(t=d(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(y.First)});break;case m.ArrowUp:u.preventDefault(),u.stopPropagation(),e.openMenu(),R(()=>{var t;(t=d(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(y.Last)});break}}function l(u){switch(u.key){case m.Space:u.preventDefault();break}}function h(u){a.disabled||(e.menuState.value===0?(e.closeMenu(),R(()=>{var t;return(t=d(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(u.preventDefault(),e.openMenu(),ye(()=>{var t;return(t=d(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let I=pe(w(()=>({as:a.as,type:p.type})),e.buttonRef);return()=>{var u;let t={open:e.menuState.value===0},{...s}=a,n={ref:e.buttonRef,id:f,type:I.value,"aria-haspopup":"menu","aria-controls":(u=d(e.itemsRef))==null?void 0:u.id,"aria-expanded":e.menuState.value===0,onKeydown:r,onKeyup:l,onClick:h};return C({ourProps:n,theirProps:s,slot:t,attrs:p,slots:v,name:"MenuButton"})}}}),we=O({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:p,slots:v,expose:o}){var g;let f=(g=a.id)!=null?g:`headlessui-menu-items-${D()}`,e=E("MenuItems"),r=b(null);o({el:e.itemsRef,$el:e.itemsRef}),fe({container:w(()=>d(e.itemsRef)),enabled:w(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function l(t){var s;switch(r.value&&clearTimeout(r.value),t.key){case m.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case m.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let n=e.items.value[e.activeItemIndex.value];(s=d(n.dataRef.domRef))==null||s.click()}e.closeMenu(),q(d(e.buttonRef));break;case m.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(y.Next);case m.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(y.Previous);case m.Home:case m.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(y.First);case m.End:case m.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(y.Last);case m.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),R(()=>{var n;return(n=d(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})});break;case m.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),R(()=>ce(d(e.buttonRef),t.shiftKey?V.Previous:V.Next));break;default:t.key.length===1&&(e.search(t.key),r.value=setTimeout(()=>e.clearSearch(),350));break}}function h(t){switch(t.key){case m.Space:t.preventDefault();break}}let I=oe(),u=w(()=>I!==null?(I.value&P.Open)===P.Open:e.menuState.value===0);return()=>{var t,s;let n={open:e.menuState.value===0},{...i}=a,x={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(s=d(e.buttonRef))==null?void 0:s.id,id:f,onKeydown:l,onKeyup:h,role:"menu",tabIndex:0,ref:e.itemsRef};return C({ourProps:x,theirProps:i,slot:n,attrs:p,slots:v,features:K.RenderStrategy|K.Static,visible:u.value,name:"MenuItems"})}}}),Me=O({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:p,attrs:v,expose:o}){var g;let f=(g=a.id)!=null?g:`headlessui-menu-item-${D()}`,e=E("MenuItem"),r=b(null);o({el:r,$el:r});let l=w(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===f:!1),h=ve(r),I=w(()=>({disabled:a.disabled,get textValue(){return h()},domRef:r}));Z(()=>e.registerItem(f,I)),G(()=>e.unregisterItem(f)),J(()=>{e.menuState.value===0&&l.value&&e.activationTrigger.value!==0&&R(()=>{var c,$;return($=(c=d(r))==null?void 0:c.scrollIntoView)==null?void 0:$.call(c,{block:"nearest"})})});function u(c){if(a.disabled)return c.preventDefault();e.closeMenu(),q(d(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(y.Nothing);e.goToItem(y.Specific,f)}let s=ue();function n(c){s.update(c)}function i(c){s.wasMoved(c)&&(a.disabled||l.value||e.goToItem(y.Specific,f,0))}function x(c){s.wasMoved(c)&&(a.disabled||l.value&&e.goToItem(y.Nothing))}return()=>{let{disabled:c}=a,$={active:l.value,disabled:c,close:e.closeMenu},{...z}=a;return C({ourProps:{id:f,ref:r,role:"menuitem",tabIndex:c===!0?void 0:-1,"aria-disabled":c===!0?!0:void 0,disabled:void 0,onClick:u,onFocus:t,onPointerenter:n,onMouseenter:n,onPointermove:i,onMousemove:i,onPointerleave:x,onMouseleave:x},theirProps:{...v,...z},slot:$,attrs:v,slots:p,name:"MenuItem"})}}});function ke(a,p){return T(),A("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}const _e={class:"mx-auto max-w-7xl px-6 lg:px-8"},Re={class:"flex h-16 justify-between"},Pe={class:"pb-0 -my-px ml-6 flex space-x-4"},Te={class:"flex"},De=["href","aria-current"],Oe=["href"],Ce={class:"ml-6 flex items-center"},$e=S("span",{class:"sr-only"},"Open user menu",-1),Ae=["href"],Ve={__name:"TopBar",props:{current:{type:String,required:!1}},setup(a){const p=X(),v=[{name:"Data",href:route("statements"),roles:["actor","analyst","manager","supervisor","admin"]},{name:"Tasks",href:route("validation"),roles:["manager","supervisor","admin"]},{name:"Logging",href:route("logs-review"),roles:["manager","supervisor","admin"]},{name:"Access",href:route("stores-creation"),roles:["supervisor","admin"]},{name:"Settings",href:route("app"),roles:["admin"]}],o=[{name:"My account",href:route("account")},{name:"Sign Out",href:route("logout")}];return(g,f)=>(T(),Y(k(be),{as:"nav",class:"bg-gray-800"},{default:_(()=>[S("div",_e,[S("div",Re,[M(ae,{compact:!0,dark:!0,href:v[0].href},null,8,["href"]),S("div",Pe,[(T(),A(F,null,L(v,e=>S("span",Te,[e.roles.includes(k(p).props.auth.role)&&!["actor","analyst"].includes(k(p).props.auth.role)?(T(),A("span",{key:e.name,href:e.href,class:N([e.name==a.current?"border-fuchsia-500 text-white":"border-transparent text-white/50 hover:text-white","box-border inline-flex items-center border-b-4 text-sm font-medium"]),"aria-current":e.name==a.current?"page":void 0},[S("a",{href:e.href,class:N(["rounded-md px-3 py-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/80"])},j(e.name),9,Oe)],10,De)):ee("",!0)])),64))]),S("div",Ce,[M(ne,{dark:!0}),M(k(Ie),{as:"div",class:"relative ml-4"},{default:_(()=>[S("div",null,[M(k(Se),{class:"flex max-w-xs items-center rounded-full bg-transparent text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white"},{default:_(()=>[$e,M(k(ke),{class:"h-7 w-7 text-gray-400 hover:text-gray-200"})]),_:1})]),M(te,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:_(()=>[M(k(we),{class:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:_(()=>[(T(),A(F,null,L(o,e=>M(k(Me),{key:e.name},{default:_(({active:r})=>[S("a",{href:e.href,class:N([r?"text-gray-900 bg-gray-200 dark:text-black dark:bg-gray-300":"text-gray-700","block px-4 py-2 text-sm"])},j(e.name),11,Ae)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})])])])]),_:1}))}};export{Me as M,Se as S,Ve as _,we as b,Ie as g};
