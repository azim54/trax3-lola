import{_ as v}from"./AccessLayout-C1y39Yor.js";import{g as l,o as k,c as x,d as o,u as j,w as s,F as w,Z as V,e as I,a as m}from"./app-BqYB4w7h.js";import{_ as u}from"./InputLabel-B012P3ON.js";import{_ as p}from"./Select-I1X3nauV.js";import{_ as C}from"./JobsManagement-BhfjSFNe.js";import{_ as D}from"./JobLogs-CCjrTMq8.js";import"./AuthenticatedLayout-DmkbqqwL.js";import"./TopBar-CSycyVTE.js";import"./ApplicationLogo-CbRF8qXe.js";import"./form-BD1T68Go.js";import"./use-resolve-button-type-zbaL4VAc.js";import"./calculate-active-index-CJPhqQS-.js";import"./use-text-value-5zAQL0RU.js";import"./use-tree-walker-CEHhLUFs.js";import"./NeutralBadge-Cx27iNjU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ChevronUpDownIcon-BxOM5Ujt.js";import"./FormModal--OgS4LYv.js";import"./PrimaryButton-JrsBxlP3.js";import"./transition-CSxLRhS2.js";import"./disposables-CuHKeC00.js";import"./ConfirmModal-DdIInXQ7.js";import"./moment-Cl4UOzQZ.js";import"./TextInput-Bd33mpYb.js";import"./InputError-_zuJ5dV-.js";import"./PencilSquareIcon-CqSWVHZD.js";import"./DataPanel-eTawuoZh.js";import"./CrudItems-BFkrHaNx.js";import"./LoadItems-f7CjgfCr.js";import"./FilterItems-DtKLW4qf.js";const T={class:"px-6"},y={class:"mt-5 px-6"},d="/trax/api/gateway/front/jobs/cmi5-tokens-deletion",ae={__name:"Cmi5TokensDeletion",setup(M){const f={until:"1_hour",store:null},_=[{id:"now",name:"Now"},{id:"1_hour",name:"One hour ago"},{id:"1_day",name:"One day ago"},{id:"1_week",name:"One week ago"}],i=l([{id:null,name:"All stores"}]),c=r=>new Promise((e,n)=>{axios.get("/trax/api/gateway/front/stores").then(b=>{i.value=b.data.data.filter(a=>a.status==="ready").map(a=>({id:a.slug,name:a.name})),i.value.unshift({id:null,name:"All stores"}),e()})}),g=(r,e)=>e=="until"?r.settings.until:r[e]===void 0?null:r[e],t=l(null);return(r,e)=>(k(),x(w,null,[o(j(V),{title:"CMI5 Tokens Deletion"}),o(v,{"side-menu-current":"CMI5 Tokens Deletion"},{default:s(()=>[o(C,{endpoint:d,title:"CMI5 Tokens Deletion",jobProps:f,afterPropLoading:g,beforeItemLoading:c,repeatable:!0,formDisabled:i.value.length<=1,onInit:e[2]||(e[2]=n=>t.value=n)},{description:s(()=>[I(" You can create jobs to delete expired CMI5 tokens. ")]),form:s(()=>[m("div",T,[o(u,{value:"Store"}),o(p,{id:"store",options:i.value,modelValue:t.value.form.store,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.form.store=n),class:"mt-1"},null,8,["options","modelValue"])]),m("div",y,[o(u,{value:"Tokens created until"}),o(p,{id:"until",options:_,modelValue:t.value.form.until,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.form.until=n),class:"mt-1"},null,8,["modelValue"])])]),feedback:s(()=>[o(D,{job:t.value.job,endpoint:d},null,8,["job"])]),_:1},8,["formDisabled"])]),_:1})],64))}};export{ae as default};
