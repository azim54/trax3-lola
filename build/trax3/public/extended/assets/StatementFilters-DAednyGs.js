import{F as L,_ as P}from"./LinkButton-wwdNtJLC.js";import{_ as C,a as b}from"./AgentField-Cckzi0Yd.js";import{_ as V}from"./InputLabel-B012P3ON.js";import{_ as U}from"./InputError-_zuJ5dV-.js";import{o as p,c as y,a as f,m as k,d as n,n as x,F as E,e as w,t as O,b as c,u as m,s as B,w as g,j as $,k as I}from"./app-BqYB4w7h.js";import{_ as F}from"./TextInputWithCompletion-u-xIqChF.js";import{u as q}from"./StoreSelector-eCG8qd9a.js";import{_ as M}from"./ActivityField-DRf5SJxl.js";import{_ as N}from"./ActivityTypeField-wW2dIZQS.js";import{_ as S}from"./TimestampFilter-COmtmHSt.js";import{_ as T}from"./Checkbox-CesKyGxn.js";import{_ as z}from"./PrimaryButton-JrsBxlP3.js";import{r as R}from"./ChevronUpIcon-CDU9mihh.js";import{u as D}from"./FilterItems-DtKLW4qf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ChevronUpDownIcon-BxOM5Ujt.js";import"./form-BD1T68Go.js";import"./calculate-active-index-CJPhqQS-.js";import"./use-resolve-button-type-zbaL4VAc.js";import"./use-text-value-5zAQL0RU.js";import"./use-tree-walker-CEHhLUFs.js";import"./disposables-CuHKeC00.js";import"./TextInput-Bd33mpYb.js";function X(e,u){return p(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const Z={class:"relative md:col-span-2 flex flex-row"},G={class:"w-full"},H={__name:"AgentFilterInStatements",props:{modelValue:{type:Object,required:!1},location:{type:String,default:"everywhere"},error:{type:String,required:!1}},emits:["update:modelValue","update:location","update:error","apply"],setup(e,{emit:u}){const l=e,o=u,s=[{id:"everywhere",name:"Everywhere"},{id:"actor",name:"As the actor"},{id:"object",name:"As the object"}];return k(()=>{o("update:location",l.location)}),(a,i)=>(p(),y("div",Z,[n(V,{for:"agent",value:"Agent"}),f("div",G,[f("div",{class:x(["flex rounded-md w-full",e.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[n(C,{rounded:!1,modelValue:e.modelValue,error:e.error,showError:!1,"onUpdate:modelValue":i[0]||(i[0]=d=>a.$emit("update:modelValue",d)),"onUpdate:error":i[1]||(i[1]=d=>a.$emit("update:error",d)),onApply:i[2]||(i[2]=d=>a.$emit("apply"))},null,8,["modelValue","error"]),n(b,{id:"agent-where",right:!0,modelValue:e.location,"onUpdate:modelValue":i[3]||(i[3]=d=>a.$emit("update:location",d)),options:s},null,8,["modelValue"])],2),n(U,{error:e.error},null,8,["error"])])]))}},J={class:"relative md:col-span-2 flex flex-row"},K="iri",Q={__name:"VerbFilter",props:{modelValue:{type:String,required:!0},error:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e){const{currentStore:u}=q(),l="/trax/api/gateway/front/stores/"+u()+"/verbs",o=s=>({sort:["iri"],limit:10,filters:{in_iri:s}});return(s,a)=>(p(),y("div",J,[n(V,{for:"verb",value:"Verb"}),n(F,{id:"verb",placeholder:"http://adlnet.gov/expapi/verbs/completed",modelValue:e.modelValue,error:e.error,"onUpdate:modelValue":a[0]||(a[0]=i=>s.$emit("update:modelValue",i)),"onUpdate:error":a[1]||(a[1]=i=>s.$emit("update:error",i)),onApply:a[2]||(a[2]=i=>s.$emit("apply")),completionEndpoint:l,completionProp:K,completionParams:o},null,8,["modelValue","error"])]))}},W={class:"relative md:col-span-2 flex flex-row"},Y={class:"w-full"},h={class:"relative flex flex-grow items-stretch focus-within:z-10"},_={__name:"ActivityFilterInStatements",props:{modelValue:{type:String,required:!0},location:{type:String,default:"everywhere"},error:{type:String,required:!1}},emits:["update:modelValue","update:location","update:error","apply"],setup(e,{emit:u}){const l=e,o=u,s=[{id:"everywhere",name:"Everywhere"},{id:"object",name:"As the object"}];return k(()=>{o("update:location",l.location)}),(a,i)=>(p(),y("div",W,[n(V,{for:"activity",value:"Activity"}),f("div",Y,[f("div",{class:x(["flex rounded-md w-full",e.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[f("div",h,[n(M,{class:"rounded-none rounded-l",modelValue:e.modelValue,error:e.error,showError:!1,"onUpdate:modelValue":i[0]||(i[0]=d=>a.$emit("update:modelValue",d)),"onUpdate:error":i[1]||(i[1]=d=>a.$emit("update:error",d)),onApply:i[2]||(i[2]=d=>a.$emit("apply"))},null,8,["modelValue","error"])]),n(b,{id:"activity-where",right:!0,modelValue:e.location,"onUpdate:modelValue":i[3]||(i[3]=d=>a.$emit("update:location",d)),options:s},null,8,["modelValue"])],2),n(U,{error:e.error},null,8,["error"])])]))}},ee={class:"relative md:col-span-2 flex flex-row"},re={class:"w-full"},te={class:"relative flex flex-grow items-stretch focus-within:z-10"},oe={__name:"ActivityTypeFilterInStatements",props:{modelValue:{type:String,required:!0},error:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e){const u=[{id:"object",name:"In the object"}];return(l,o)=>(p(),y("div",ee,[n(V,{for:"activity-type",value:"Act. Type"}),f("div",re,[f("div",{class:x(["flex rounded-md w-full",e.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[f("div",te,[n(N,{class:"rounded-none rounded-l",modelValue:e.modelValue,error:e.error,showError:!1,"onUpdate:modelValue":o[0]||(o[0]=s=>l.$emit("update:modelValue",s)),"onUpdate:error":o[1]||(o[1]=s=>l.$emit("update:error",s)),onApply:o[2]||(o[2]=s=>l.$emit("apply"))},null,8,["modelValue","error"])]),n(b,{id:"activity-type-where",right:!0,disabled:!0,modelValue:"object",options:u})],2),n(U,{error:e.error},null,8,["error"])])]))}},le={class:"relative md:col-span-2 flex flex-row"},ie="iri",ne={__name:"XapiProfileFilter",props:{modelValue:{type:String,required:!0},error:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e){const{currentStore:u}=q(),l="/trax/api/gateway/front/stores/"+u()+"/activities",o=s=>({sort:["iri"],limit:10,filters:{in_iri:s,is_category:1}});return(s,a)=>(p(),y("div",le,[n(V,{for:"profile",value:"xAPI Profile"}),n(F,{id:"profile",placeholder:"https://w3id.org/xapi/cmi5/context/categories/cmi5",modelValue:e.modelValue,error:e.error,"onUpdate:modelValue":a[0]||(a[0]=i=>s.$emit("update:modelValue",i)),"onUpdate:error":a[1]||(a[1]=i=>s.$emit("update:error",i)),completionEndpoint:l,completionProp:ie,completionParams:o},null,8,["modelValue","error"])]))}},ae={class:"relative flex flex-row"},se={class:"relative flex flex-row"},de={__name:"TimeFilters",props:{since:{type:String,required:!0},until:{type:String,required:!0},errors:{type:Object,required:!0}},emits:["update:since","update:until","apply"],setup(e){return(u,l)=>(p(),y(E,null,[f("div",ae,[n(V,{for:"since",value:"Since (>=)",class:"sm:basis-32"}),n(S,{id:"since",modelValue:e.since,error:e.errors.since,"onUpdate:error":l[0]||(l[0]=o=>e.errors.since=o),"onUpdate:modelValue":l[1]||(l[1]=o=>u.$emit("update:since",o)),onApply:l[2]||(l[2]=o=>u.$emit("apply"))},null,8,["modelValue","error"])]),f("div",se,[n(V,{for:"until",value:"Until (<)"}),n(S,{id:"until",modelValue:e.until,error:e.errors.until,"onUpdate:error":l[3]||(l[3]=o=>e.errors.until=o),"onUpdate:modelValue":l[4]||(l[4]=o=>u.$emit("update:until",o)),onApply:l[5]||(l[5]=o=>u.$emit("apply"))},null,8,["modelValue","error"])])],64))}},ue={__name:"MoreLessButton",props:{moreLabel:{type:String,default:"More"},lessLabel:{type:String,default:"Less"},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:u}){return(l,o)=>(p(),y("button",{type:"button",onClick:o[0]||(o[0]=s=>l.$emit("update:modelValue",!e.modelValue)),class:"inline-flex items-center gap-x-1 rounded px-3.5 py-2 text-sm font-semibold text-indigo-600 bg-transparent focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 hover:text-indigo-500 dark:hover:bg-white/10 dark:text-fuchsia-400 dark:focus-visible:outline-fuchsia-400"},[w(O(e.modelValue?e.lessLabel:e.moreLabel)+" ",1),e.modelValue?(p(),c(m(R),{key:0,class:"-mr-0.5 h-5 w-5","aria-hidden":"true"})):(p(),c(m(X),{key:1,class:"-mr-0.5 h-5 w-5","aria-hidden":"true"}))]))}},me={class:"relative text-right space-x-5"},pe={class:"relative text-center md:col-span-2 -mt-5"},Ie={__name:"StatementFilters",props:{filters:{type:Object,required:!0},options:{type:Object,required:!0},counter:{type:Number,required:!0},errors:{type:Object,required:!0}},emits:["apply"],setup(e,{emit:u}){const l=u,o=e,{resetingFilters:s,resetFilters:a,applyingFilters:i,applyFilters:d,showMoreFilters:v,recordFilters:j}=D(o,{localStorage:"statement-filters",emit:l});return B(v,A=>{j(),A||Object.assign(o.filters,{type:"",profile:"",since:"",until:""})}),(A,r)=>(p(),c(L,null,{default:g(()=>[n(H,{modelValue:e.filters.agent,"onUpdate:modelValue":r[0]||(r[0]=t=>e.filters.agent=t),location:e.options.agent_location,"onUpdate:location":r[1]||(r[1]=t=>e.options.agent_location=t),error:e.errors.agent,"onUpdate:error":r[2]||(r[2]=t=>e.errors.agent=t),onApply:m(d)},null,8,["modelValue","location","error","onApply"]),n(Q,{modelValue:e.filters.verb,"onUpdate:modelValue":r[3]||(r[3]=t=>e.filters.verb=t),error:e.errors.verb,"onUpdate:error":r[4]||(r[4]=t=>e.errors.verb=t),onApply:m(d)},null,8,["modelValue","error","onApply"]),n(_,{modelValue:e.filters.activity,"onUpdate:modelValue":r[5]||(r[5]=t=>e.filters.activity=t),location:e.options.activity_location,"onUpdate:location":r[6]||(r[6]=t=>e.options.activity_location=t),error:e.errors.activity,"onUpdate:error":r[7]||(r[7]=t=>e.errors.activity=t),onApply:m(d)},null,8,["modelValue","location","error","onApply"]),m(v)?(p(),c(oe,{key:0,modelValue:e.filters.type,"onUpdate:modelValue":r[8]||(r[8]=t=>e.filters.type=t),error:e.errors.type,"onUpdate:error":r[9]||(r[9]=t=>e.errors.type=t),onApply:m(d)},null,8,["modelValue","error","onApply"])):$("",!0),m(v)?(p(),c(ne,{key:1,modelValue:e.filters.profile,"onUpdate:modelValue":r[10]||(r[10]=t=>e.filters.profile=t),error:e.errors.profile,"onUpdate:error":r[11]||(r[11]=t=>e.errors.profile=t),onApply:m(d)},null,8,["modelValue","error","onApply"])):$("",!0),m(v)?(p(),c(de,{key:2,since:e.filters.since,"onUpdate:since":r[12]||(r[12]=t=>e.filters.since=t),until:e.filters.until,"onUpdate:until":r[13]||(r[13]=t=>e.filters.until=t),errors:e.errors,onApply:m(d)},null,8,["since","until","errors","onApply"])):$("",!0),n(T,{id:"ascending",label:"Chronological",modelValue:e.options.ascending,"onUpdate:modelValue":r[14]||(r[14]=t=>e.options.ascending=t)},null,8,["modelValue"]),f("div",me,[n(P,{processing:m(s),onClick:m(a)},{default:g(()=>[w("Reset")]),_:1},8,["processing","onClick"]),n(z,{processing:m(i),onClick:m(d)},{default:g(()=>[w("Apply")]),_:1},8,["processing","onClick"])]),f("div",pe,[n(ue,{modelValue:m(v),"onUpdate:modelValue":r[15]||(r[15]=t=>I(v)?v.value=t:null),moreLabel:"More filters",lessLabel:"Less filters"},null,8,["modelValue"])])]),_:1}))}};export{Ie as default};
