import{_ as w}from"./TasksLayout-BcOeq5lv.js";import{g as p,o as f,c as _,d as r,u as l,w as a,F as L,Z as S,e as U,a as u,t as $,j as k}from"./app-BqYB4w7h.js";import{_ as m}from"./InputLabel-B012P3ON.js";import{_ as A}from"./TextInput-Bd33mpYb.js";import{_ as c}from"./Select-I1X3nauV.js";import{u as M,_ as N}from"./JobsManagement-BhfjSFNe.js";import{_ as Y}from"./JobLogs-CCjrTMq8.js";import"./AuthenticatedLayout-DmkbqqwL.js";import"./TopBar-CSycyVTE.js";import"./ApplicationLogo-CbRF8qXe.js";import"./form-BD1T68Go.js";import"./use-resolve-button-type-zbaL4VAc.js";import"./calculate-active-index-CJPhqQS-.js";import"./use-text-value-5zAQL0RU.js";import"./use-tree-walker-CEHhLUFs.js";import"./InputError-_zuJ5dV-.js";import"./NeutralBadge-Cx27iNjU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ChevronUpDownIcon-BxOM5Ujt.js";import"./FormModal--OgS4LYv.js";import"./PrimaryButton-JrsBxlP3.js";import"./transition-CSxLRhS2.js";import"./disposables-CuHKeC00.js";import"./ConfirmModal-DdIInXQ7.js";import"./moment-Cl4UOzQZ.js";import"./PencilSquareIcon-CqSWVHZD.js";import"./DataPanel-eTawuoZh.js";import"./CrudItems-BFkrHaNx.js";import"./LoadItems-f7CjgfCr.js";import"./FilterItems-DtKLW4qf.js";const z={class:"px-6"},B={class:"mt-5 px-6"},O={key:0,class:"mt-5 px-6"},C={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},g="/trax/api/gateway/front/jobs/pseudo",vt={__name:"Pseudo",setup(F){const v={until:"now",until_date:"",store:null},{localDateWithSeconds:d,formatIsoDate:x,untilOptions:P,untilNotice:b}=M(),s=p([{id:null,name:"All stores"}]),y=e=>new Promise((t,n)=>{axios.get("/trax/api/gateway/front/stores").then(I=>{s.value=I.data.data.filter(i=>i.status==="ready").map(i=>({id:i.slug,name:i.name})),s.value.unshift({id:null,name:"All stores"}),t()})}),V=e=>{let t="";return e.settings.until=="date"&&(t="Until "+d(e.settings.until_date)),e.description=t,e},j=(e,t)=>t=="until"?e.settings.until:t=="until_date"&&e.settings.until_date?d(e.settings.until_date):e[t]===void 0?null:e[t],D=(e,t)=>t=="until_date"&&e.until_date?x(e.until_date):e[t],o=p(null);return(e,t)=>(f(),_(L,null,[r(l(S),{title:"Pseudonymization"}),r(w,{"side-menu-current":"Pseudonymization"},{default:a(()=>[r(N,{endpoint:g,title:"Pseudonymization",jobProps:v,beforeItemLoading:y,afterItemLoading:V,afterPropLoading:j,beforePropPosting:D,onInit:t[4]||(t[4]=n=>o.value=n)},{description:a(()=>[U(" You can create jobs to pseudonymize xAPI statements. ")]),form:a(()=>[u("div",z,[r(m,{value:"Store"}),r(c,{id:"store",options:s.value,modelValue:o.value.form.store,"onUpdate:modelValue":t[0]||(t[0]=n=>o.value.form.store=n),class:"mt-1"},null,8,["options","modelValue"])]),u("div",B,[r(m,{value:"Data recorded until"}),r(c,{id:"until",options:l(P),modelValue:o.value.form.until,"onUpdate:modelValue":t[1]||(t[1]=n=>o.value.form.until=n),class:"mt-1"},null,8,["options","modelValue"])]),o.value.form.until=="date"?(f(),_("div",O,[r(m,{for:"until_date",value:"Date"}),r(A,{id:"until_date",placeholder:"YYYY-MM-DD HH:MM:SS",modelValue:o.value.form.until_date,"onUpdate:modelValue":t[2]||(t[2]=n=>o.value.form.until_date=n),error:o.value.errors.until_date,"onUpdate:error":t[3]||(t[3]=n=>o.value.errors.until_date=n),onApply:o.value.createOrUpdate,class:"mt-1"},null,8,["modelValue","error","onApply"]),u("div",C,$(l(b)(o.value.form.until_date)),1)])):k("",!0)]),feedback:a(()=>[r(Y,{job:o.value.job,endpoint:g},null,8,["job"])]),_:1})]),_:1})],64))}};export{vt as default};
