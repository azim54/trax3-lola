function a(o){function n(){document.readyState!=="loading"&&(o(),document.removeEventListener("DOMContentLoaded",n))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",n),n())}let d=[];a(()=>{function o(n){n.target instanceof HTMLElement&&n.target!==document.body&&d[0]!==n.target&&(d.unshift(n.target),d=d.filter(e=>e!=null&&e.isConnected),d.splice(10))}window.addEventListener("click",o,{capture:!0}),window.addEventListener("mousedown",o,{capture:!0}),window.addEventListener("focus",o,{capture:!0}),document.body.addEventListener("click",o,{capture:!0}),document.body.addEventListener("mousedown",o,{capture:!0}),document.body.addEventListener("focus",o,{capture:!0})});function u(o){typeof queueMicrotask=="function"?queueMicrotask(o):Promise.resolve().then(o).catch(n=>setTimeout(()=>{throw n}))}function s(){let o=[],n={addEventListener(e,t,r,i){return e.addEventListener(t,r,i),n.add(()=>e.removeEventListener(t,r,i))},requestAnimationFrame(...e){let t=requestAnimationFrame(...e);n.add(()=>cancelAnimationFrame(t))},nextFrame(...e){n.requestAnimationFrame(()=>{n.requestAnimationFrame(...e)})},setTimeout(...e){let t=setTimeout(...e);n.add(()=>clearTimeout(t))},microTask(...e){let t={current:!0};return u(()=>{t.current&&e[0]()}),n.add(()=>{t.current=!1})},style(e,t,r){let i=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:r}),this.add(()=>{Object.assign(e.style,{[t]:i})})},group(e){let t=s();return e(t),this.add(()=>t.dispose())},add(e){return o.push(e),()=>{let t=o.indexOf(e);if(t>=0)for(let r of o.splice(t,1))r()}},dispose(){for(let e of o.splice(0))e()}};return n}export{d as a,s as o,u as t};
