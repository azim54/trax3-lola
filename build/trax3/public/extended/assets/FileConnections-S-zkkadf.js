import{_ as N}from"./AccessLayout-C1y39Yor.js";import{o as i,b as W,w as l,d as r,u as e,a as t,e as c,t as u,r as D,f as L,c as m,F as b,Z as O,i as F,k as V}from"./app-BqYB4w7h.js";import{_ as P}from"./PrimaryButton-JrsBxlP3.js";import{_ as T,r as q,a as z}from"./FormModal--OgS4LYv.js";import{a as E,r as G,_ as K}from"./ConfirmModal-DdIInXQ7.js";import{W as M,h as I,G as J,V as R,S as Z}from"./transition-CSxLRhS2.js";import{_ as x}from"./InputLabel-B012P3ON.js";import{_ as w}from"./TextInput-Bd33mpYb.js";import{u as H}from"./CrudItems-BFkrHaNx.js";import{r as Q}from"./PencilSquareIcon-CqSWVHZD.js";import"./AuthenticatedLayout-DmkbqqwL.js";import"./TopBar-CSycyVTE.js";import"./ApplicationLogo-CbRF8qXe.js";import"./form-BD1T68Go.js";import"./use-resolve-button-type-zbaL4VAc.js";import"./calculate-active-index-CJPhqQS-.js";import"./use-text-value-5zAQL0RU.js";import"./use-tree-walker-CEHhLUFs.js";import"./disposables-CuHKeC00.js";import"./InputError-_zuJ5dV-.js";import"./LoadItems-f7CjgfCr.js";const X=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Y={class:"fixed inset-0 z-10 overflow-y-auto"},ee={class:"flex min-h-full justify-center text-center items-center p-0"},te={class:"p-6 pb-0"},se={class:"flex items-start"},oe={class:"flex flex-shrink-0 items-center justify-center rounded-full mx-0 h-10 w-10 bg-orange-100 dark:bg-orange-500"},re={class:"ml-4 mt-0 text-left"},ae={class:"mt-2"},le={class:"text-sm text-gray-500 dark:text-gray-400"},ie={class:"px-6 py-4 flex flex-row-reverse space-x-5"},ne={__name:"WarningModal",props:{title:{type:String,required:!0},modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(_){return(a,n)=>(i(),W(e(Z),{as:"template",show:_.modelValue},{default:l(()=>[r(e(M),{as:"div",class:"relative z-10",onClose:n[1]||(n[1]=y=>a.$emit("update:modelValue",!1))},{default:l(()=>[r(e(I),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[X]),_:1}),t("div",Y,[t("div",ee,[r(e(I),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-0 scale-95","enter-to":"opacity-100 translate-y-0 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 scale-100","leave-to":"opacity-0 translate-y-0 scale-95"},{default:l(()=>[r(e(J),{class:"relative transform rounded-lg text-left shadow-xl transition-all my-8 w-full max-w-lg bg-white dark:ring-0 dark:bg-gray-800"},{default:l(()=>[t("div",te,[t("div",se,[t("div",oe,[r(e(E),{class:"h-6 w-6 text-orange-600 dark:text-white","aria-hidden":"true"})]),t("div",re,[r(e(R),{as:"h3",class:"text-base uppercase font-semibold leading-6 text-gray-900 dark:text-gray-100"},{default:l(()=>[c(u(_.title),1)]),_:1}),t("div",ae,[t("p",le,[D(a.$slots,"default")])])])])]),t("div",ie,[r(T,{class:"inline-flex justify-center",onClick:n[0]||(n[0]=y=>a.$emit("update:modelValue",!1))},{default:l(()=>[c(" OK ")]),_:1})])]),_:3})]),_:3})])])]),_:3})]),_:3},8,["show"]))}},de={class:"rounded-lg shadow-md bg-white dark:ring-0 dark:bg-gray-800"},me={class:"p-5 border-b-2 border-gray-200 dark:border-gray-700"},ce={class:"-ml-4 -mt-2 flex flex-wrap items-center justify-between sm:flex-nowrap"},ue=t("div",{class:"ml-4 mt-2 max-w-lg"},[t("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-100"}," Files "),t("p",{class:"mt-1 text-sm text-gray-500"}," File connections are helpful to import or export xAPI data from/to JSON files. ")],-1),fe={class:"ml-4 mt-2 flex-shrink-0"},pe={key:0,class:"table-auto min-w-full divide-y divide-gray-300 dark:divide-gray-500"},xe={class:"divide-y divide-gray-200 dark:divide-gray-700"},_e={class:"px-5 py-3"},ye={class:"text-sm font-medium text-gray-900 dark:text-gray-300"},ge={class:"px-5 py-3"},ve={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},he={class:"px-5 py-3"},ke={class:"flex space-x-4 justify-end items-center"},be={key:1,class:"px-5 py-3 text-sm text-gray-500 dark:text-gray-400"},Ve={class:"px-6"},we={class:"mt-5 px-6"},$e={class:"mt-5 px-6"},Ce={class:"mt-5 px-6 text-xs text-gray-500 dark:text-gray-400"},Fe={class:"mt-1 mb-2 list-disc list-inside"},Ze={__name:"FileConnections",setup(_){const a=L({id:null,name:"",folder:"",prefix:""}),n=(p,o)=>["folder","prefix"].includes(o)?p.settings[o]:p[o]===void 0?null:p[o],{createItem:y,updateItem:U,confirmCreateOrUpdateItem:f,deleteItem:j,confirmDeleteItem:A,loadedItems:$,isProcessingItem:C,itemFormVisible:g,deleteItemModalVisible:v,deleteItemWarningVisible:h,itemFormErrors:d}=H({url:"/trax/api/gateway/front/connections/file"},a,{afterPropLoading:n}),S=["statements","activities","agents","activity_profiles","agent_profiles","states"];return(p,o)=>(i(),m(b,null,[r(e(O),{title:"File Connections"}),r(N,{"side-menu-current":"File Connections"},{default:l(()=>[t("div",de,[t("div",me,[t("div",ce,[ue,t("div",fe,[r(P,{onClick:e(y),class:"flex"},{default:l(()=>[r(e(q),{class:"w-5 h-5 mr-2"}),c(" Location ")]),_:1},8,["onClick"])])])]),e($).length>0?(i(),m("table",pe,[t("tbody",xe,[(i(!0),m(b,null,F(e($),(s,k)=>(i(),m("tr",{key:k},[t("td",_e,[t("div",ye,u(s.name),1)]),t("td",ge,[t("div",ve,u(s.settings.folder),1)]),t("td",he,[t("div",ke,[r(e(Q),{class:"w-5 h-5 hover:cursor-pointer text-indigo-500 hover:text-indigo-700 dark:text-fuchsia-400 dark:hover:text-fuchsia-500",onClick:B=>e(U)(s)},null,8,["onClick"]),r(e(G),{class:"w-5 h-5 hover:cursor-pointer text-indigo-500 hover:text-indigo-700 dark:text-fuchsia-400 dark:hover:text-fuchsia-500",onClick:B=>e(j)(s)},null,8,["onClick"])])])]))),128))])])):(i(),m("div",be," There is currently no file connection. ")),r(z,{title:"Files location",processing:e(C),modelValue:e(g),"onUpdate:modelValue":o[6]||(o[6]=s=>V(g)?g.value=s:null),onConfirm:e(f)},{default:l(()=>[t("div",Ve,[r(x,{for:"name",value:"Name"}),r(w,{id:"name",placeholder:"Convenient name for this location",modelValue:a.name,"onUpdate:modelValue":o[0]||(o[0]=s=>a.name=s),error:e(d).name,"onUpdate:error":o[1]||(o[1]=s=>e(d).name=s),onApply:e(f),class:"mt-1"},null,8,["modelValue","error","onApply"])]),t("div",we,[r(x,{for:"folder",value:"Folder"}),r(w,{id:"folder",placeholder:"/my-folder",modelValue:a.folder,"onUpdate:modelValue":o[2]||(o[2]=s=>a.folder=s),error:e(d).folder,"onUpdate:error":o[3]||(o[3]=s=>e(d).folder=s),onApply:e(f),class:"mt-1"},null,8,["modelValue","error","onApply"])]),t("div",$e,[r(x,{for:"prefix",value:"Files prefix"}),r(w,{id:"prefix",placeholder:"Keep it empty if don't need a prefix",modelValue:a.prefix,"onUpdate:modelValue":o[4]||(o[4]=s=>a.prefix=s),error:e(d).prefix,"onUpdate:error":o[5]||(o[5]=s=>e(d).prefix=s),onApply:e(f),class:"mt-1"},null,8,["modelValue","error","onApply"])]),t("div",Ce,[r(x,{value:"Filenames"}),t("ul",Fe,[(i(),m(b,null,F(S,(s,k)=>t("li",{key:k},u(a.prefix?a.prefix+"_":"")+u(s)+"_[store].jsonl ",1)),64))]),c(" where [store] is the slug of the store the data belongs to. ")])]),_:1},8,["processing","modelValue","onConfirm"]),r(K,{title:"Delete connection",processing:e(C),modelValue:e(v),"onUpdate:modelValue":o[7]||(o[7]=s=>V(v)?v.value=s:null),onConfirm:e(A)},{default:l(()=>[c(" Are you sure you want to delete this connection? We will check if there are some jobs using this connection before deleting it. ")]),_:1},8,["processing","modelValue","onConfirm"]),r(ne,{title:"Sorry...",modelValue:e(h),"onUpdate:modelValue":o[8]||(o[8]=s=>V(h)?h.value=s:null)},{default:l(()=>[c(" This connection is currently used by a job, so we can't remove it. ")]),_:1},8,["modelValue"])])]),_:1})],64))}};export{Ze as default};
